import{r as v,s as V,i as q}from"./index.41565780.js";import{_ as B}from"./_plugin-vue_export-helper.cdc0426e.js";import{E as p,r as n,c as S,a as u,b as s,w as r,n as F,F as U,o as k,d}from"./index.bf3875d6.js";var h=[],m=[];v.post({url:"/request/info/collector/cache/field/url",data:{}}).then(e=>{console.log(e),h=e.data.urls,m=e.data.fields}).catch(e=>{console.log(e),p({showClose:!0,message:"\u8BF7\u6C42\u9519\u8BEF",type:"warning"})});const N={name:"demo",computed:{},components:{JsonViewer:V},data(){return{myChartStyle:{float:"left",width:"100%",height:"90%"},url:"",field:"",chart:null,requestBody:{},response:{},activeName:"first"}},created(){},mounted(){this.response={},this.requestBody={},this.initCharts()},watch:{category(e,t){console.log(1111,e,t),this.setOptions(e)}},methods:{copyCurl(){var e="curl "+window.location.origin+"/request/info/collector/cache/field/url -H 'Content-Type:application/json' -X POST -d '"+JSON.stringify(this.requestBody)+"'";console.log(e);const t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),p({message:"\u5DF2\u590D\u5236",type:"success"})},setBlur(){document.activeElement.blur()},querySearchUrls(e,t){const o=e?h.filter(this.createFilter(e)):h;let a=[];for(let l=0;l<o.length;l++)a.push({value:o[l]});console.log(a),t(a)},querySearchFields(e,t){const o=e?m.filter(this.createFilter(e)):m;let a=[];for(let l=0;l<o.length;l++)a.push({value:o[l]});console.log(a),t(a)},createFilter(e){return t=>t.toUpperCase().match(e.toUpperCase())},initCharts(){this.chart=q(this.$refs.chart_wrap),window.addEventListener("resize",()=>{this.chart.resize()})},setOptions(){var e=[],t=[];this.requestBody={url:this.url,targetField:this.field},v.post({url:"/request/info/collector/report/field/url",data:{url:this.url,targetField:this.field}}).then(o=>{this.response=o,console.log(o),e=o.data.labels,t=o.data.values,this.chart.setOption({title:{text:"\u5B57\u6BB5:"+this.field+"\u5728URL:"+this.url+"\u7684\u503C\u5206\u5E03"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},color:["#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3","#ff0000","#00ff00","#0000ff"],grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:e},series:{name:this.field,type:"bar",data:t}})}).catch(o=>{console.log(o),p({showClose:!0,message:"\u8BF7\u6C42\u9519\u8BEF",type:"warning"})})}}},E={style:{display:"flex"}},O=u("h1",null,"/request/info/collector/cache/url/field",-1),L={class:"card-header"},T=u("span",null,"/request/info/collector/report/url/field",-1);function J(e,t,o,a,l,c){const f=n("el-button"),_=n("el-tag"),y=n("el-autocomplete"),C=n("el-row"),g=n("JsonViewer"),b=n("el-tab-pane"),w=n("el-tabs"),x=n("el-card");return k(),S(U,null,[u("div",E,[O,s(f,{onClick:c.setOptions,type:"primary",style:{margin:"20px"}},{default:r(()=>[d("\u67E5\u8BE2")]),_:1},8,["onClick"])]),s(C,null,{default:r(()=>[s(_,null,{default:r(()=>[d("\u9700\u8981\u7EDF\u8BA1\u7684url")]),_:1}),s(y,{onClear:t[0]||(t[0]=i=>c.setBlur()),modelValue:l.url,"onUpdate:modelValue":t[1]||(t[1]=i=>l.url=i),"fetch-suggestions":c.querySearchUrls,clearable:"",placeholder:"url",onSelect:e.handleSelect,style:{width:"100%","margin-bottom":"18px"}},null,8,["modelValue","fetch-suggestions","onSelect"]),s(_,null,{default:r(()=>[d("\u9700\u8981\u7EDF\u8BA1\u7684\u5B57\u6BB5\u540D")]),_:1}),s(y,{onClear:t[2]||(t[2]=i=>c.setBlur()),modelValue:l.field,"onUpdate:modelValue":t[3]||(t[3]=i=>l.field=i),"fetch-suggestions":c.querySearchFields,clearable:"",placeholder:"field",onSelect:e.handleSelect,style:{width:"100%","margin-bottom":"18px"}},null,8,["modelValue","fetch-suggestions","onSelect"])]),_:1}),s(x,{class:"box-card"},{header:r(()=>[u("div",L,[T,s(f,{class:"button",text:"",onClick:c.copyCurl},{default:r(()=>[d("\u590D\u5236\u4E3Acurl\u547D\u4EE4")]),_:1},8,["onClick"])])]),default:r(()=>[s(w,{modelValue:l.activeName,"onUpdate:modelValue":t[4]||(t[4]=i=>l.activeName=i),class:"demo-tabs",onTabClick:e.handleClick},{default:r(()=>[s(b,{label:"\u8BF7\u6C42\u4F53",name:"first"},{default:r(()=>[s(g,{value:l.requestBody,copyable:"",boxed:"",sort:""},null,8,["value"])]),_:1}),s(b,{label:"\u54CD\u5E94\u7ED3\u679C",name:"second"},{default:r(()=>[s(g,{value:l.response,copyable:"",boxed:"",sort:""},null,8,["value"])]),_:1})]),_:1},8,["modelValue","onTabClick"])]),_:1}),u("div",{ref:"chart_wrap",class:"chart_wrap",style:F(l.myChartStyle)},null,4)],64)}const j=B(N,[["render",J]]);export{j as default};
