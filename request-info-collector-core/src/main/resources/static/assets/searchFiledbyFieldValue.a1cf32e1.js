import{P as I}from"./PostItem.2751547e.js";import{r as V,s as U,i as E}from"./index.41565780.js";import{_ as J}from"./_plugin-vue_export-helper.cdc0426e.js";import{E as f,k as w,r as i,c as F,a as n,b as o,w as r,F as k,l as O,m as x,g as T,n as L,o as p,d as u,p as R,q as z}from"./index.bf3875d6.js";var v=[];V.post({url:"/request/info/collector/cache/field/field",data:{}}).then(e=>{console.log(e),e.data.urls,v=e.data.fields}).catch(e=>{console.log(e),f({showClose:!0,message:"\u8BF7\u6C42\u9519\u8BEF",type:"warning"})});const A={name:"demo",components:{JsonViewer:U,PostItem:I},setup(){const e=w(""),t=w(null);return{url:e,result:t}},computed:{},data(){return{myChartStyle:{float:"left",width:"100%",height:"90%"},field:"",value:"",targetFieldName:"",chart:null,params:[],requestBody:{},response:{},activeName:"first"}},created(){},mounted(){this.initCharts()},watch:{},methods:{copyCurl(){var e="curl "+window.location.origin+"/request/info/collector/cache/field/url -H 'Content-Type:application/json' -X POST -d '"+JSON.stringify(this.requestBody)+"'";console.log(e);const t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),f({message:"\u5DF2\u590D\u5236",type:"success"})},removeParam(e){this.params.splice(e,1)},addParam(){this.params.push({key:"",value:""})},setBlur(){document.activeElement.blur()},querySearchFields(e,t){const d=e?v.filter(this.createFilter(e)):v;let s=[];for(let l=0;l<d.length;l++)s.push({value:d[l]});console.log(s),t(s)},createFilter(e){return t=>t.value.toUpperCase().match(e.toUpperCase())},initCharts(){this.chart=E(this.$refs.chart_wrap),window.addEventListener("resize",()=>{this.chart.resize()})},setOptions(e){var t=[],d=[];const s=[],l=[];console.log(this),this.params.forEach(a=>{s.push(a.key),l.push(a.value)}),this.requestBody={fieldNames:s,fieldValues:l,targetField:this.targetFieldName},console.log(s),console.log(l),V.post({url:"/request/info/collector/report/field/field",data:{fieldNames:s,fieldValues:l,targetField:this.targetFieldName}}).then(a=>{console.log(a),this.response=a,t=a.data.labels,d=a.data.values,this.chart.setOption({title:{text:"\u5B57\u6BB5:"+this.targetFieldName+"\u503C\u5206\u5E03"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},color:["#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3","#ff0000","#00ff00","#0000ff"],grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:t},series:[{name:e,type:"bar",data:d}]})}).catch(a=>{console.log(a),f({showClose:!0,message:"\u8BF7\u6C42\u9519\u8BEF",type:"warning"})})}}},_=e=>(R("data-v-239b6c72"),e=e(),z(),e),j={class:"post"},G={style:{display:"flex"}},H=_(()=>n("h1",null,"/request/info/collector/cache/field/field",-1)),M={class:"post-main"},X={class:"main-head"},D=_(()=>n("div",null,"\u5B57\u6BB5\u540D",-1)),K=_(()=>n("div",null,"\u5B57\u6BB5\u503C",-1)),Q={class:"main-content"},W={class:"card-header"},Y=_(()=>n("span",null,"/request/info/collector/report/url/field",-1));function Z(e,t,d,s,l,a){const h=i("el-button"),y=i("el-tag"),N=i("el-autocomplete"),q=i("PostItem"),S=i("JsonResult"),g=i("JsonViewer"),b=i("el-tab-pane"),B=i("el-tabs"),P=i("el-card");return p(),F(k,null,[n("div",j,[n("div",G,[H,o(h,{onClick:a.setOptions,type:"primary",style:{margin:"20px"}},{default:r(()=>[u("\u67E5\u8BE2")]),_:1},8,["onClick"])]),o(y,null,{default:r(()=>[u("\u9700\u8981\u7EDF\u8BA1\u7684\u5B57\u6BB5\u540D")]),_:1}),o(N,{onClear:t[0]||(t[0]=c=>a.setBlur()),modelValue:l.targetFieldName,"onUpdate:modelValue":t[1]||(t[1]=c=>l.targetFieldName=c),"fetch-suggestions":a.querySearchFields,clearable:"",placeholder:"targetFieldName",onSelect:e.handleSelect,style:{width:"100%","margin-bottom":"20px"}},null,8,["modelValue","fetch-suggestions","onSelect"]),o(y,null,{default:r(()=>[u("\u7EDF\u8BA1\u6839\u636E\u7684\u5B57\u6BB5\uFF08\u4E00\u4E2A\u6216\u591A\u4E2A\uFF09")]),_:1}),n("div",M,[n("div",X,[D,K,o(h,{onClick:a.addParam,type:"primary"},{default:r(()=>[u("\u6DFB\u52A0")]),_:1},8,["onClick"])]),n("div",Q,[(p(!0),F(k,null,O(l.params,(c,C)=>(p(),x(q,{onRemoveItem:m=>a.removeParam(C),name:c.key,"onUpdate:name":m=>c.key=m,value:c.value,"onUpdate:value":m=>c.value=m,key:C},null,8,["onRemoveItem","name","onUpdate:name","value","onUpdate:value"]))),128))])]),s.result?(p(),x(S,{key:0,result:s.result},null,8,["result"])):T("",!0)]),o(P,{class:"box-card"},{header:r(()=>[n("div",W,[Y,o(h,{class:"button",text:"",onClick:a.copyCurl},{default:r(()=>[u("\u590D\u5236\u4E3Acurl\u547D\u4EE4")]),_:1},8,["onClick"])])]),default:r(()=>[o(B,{modelValue:l.activeName,"onUpdate:modelValue":t[2]||(t[2]=c=>l.activeName=c),class:"demo-tabs",onTabClick:e.handleClick},{default:r(()=>[o(b,{label:"\u8BF7\u6C42\u4F53",name:"first"},{default:r(()=>[o(g,{value:l.requestBody,copyable:"",boxed:"",sort:""},null,8,["value"])]),_:1}),o(b,{label:"\u54CD\u5E94\u7ED3\u679C",name:"second"},{default:r(()=>[o(g,{value:l.response,copyable:"",boxed:"",sort:""},null,8,["value"])]),_:1})]),_:1},8,["modelValue","onTabClick"])]),_:1}),n("div",{ref:"chart_wrap",class:"chart_wrap",style:L(l.myChartStyle)},null,4)],64)}const ae=J(A,[["render",Z],["__scopeId","data-v-239b6c72"]]);export{ae as default};
