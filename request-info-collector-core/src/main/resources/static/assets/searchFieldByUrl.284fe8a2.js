import{r as b,i as V}from"./index.0ef1d26a.js";import{_ as B}from"./_plugin-vue_export-helper.cdc0426e.js";import{E as v,a as n,c as F,b as u,d as a,w as s,n as S,F as q,o as U,e as d}from"./index.617ff052.js";var h=[],p=[];b.post({url:"/request/info/collector/cache/field/url",data:{}}).then(e=>{console.log(e),h=e.data.urls,p=e.data.fields}).catch(e=>{console.log(e),v({showClose:!0,message:"\u8BF7\u6C42\u9519\u8BEF",type:"warning"})});const k={name:"demo",computed:{},data(){return{myChartStyle:{float:"left",width:"100%",height:"90%"},url:"",field:"",chart:null,requestBody:{},response:{}}},created(){},mounted(){this.initCharts()},watch:{category(e,t){console.log(1111,e,t),this.setOptions(e)}},methods:{setBlur(){document.activeElement.blur()},querySearchUrls(e,t){const o=e?h.filter(this.createFilter(e)):h;let r=[];for(let l=0;l<o.length;l++)r.push({value:o[l]});console.log(r),t(r)},querySearchFields(e,t){const o=e?p.filter(this.createFilter(e)):p;let r=[];for(let l=0;l<o.length;l++)r.push({value:o[l]});console.log(r),t(r)},createFilter(e){return t=>t.toUpperCase().match(e.toUpperCase())},initCharts(){this.chart=V(this.$refs.chart_wrap),window.addEventListener("resize",()=>{this.chart.resize()})},setOptions(){var e=[],t=[];this.requestBody={url:this.url,targetField:this.field},b.post({url:"/request/info/collector/report/field/url",data:{url:this.url,targetField:this.field}}).then(o=>{this.response=o,console.log(o),e=o.data.labels,t=o.data.values,this.chart.setOption({title:{text:"\u5B57\u6BB5:"+this.field+"\u5728URL:"+this.url+"\u7684\u503C\u5206\u5E03"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},color:["#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3","#ff0000","#00ff00","#0000ff"],grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:e},series:{name:this.field,type:"bar",data:t}})}).catch(o=>{console.log(o),v({showClose:!0,message:"\u8BF7\u6C42\u9519\u8BEF",type:"warning"})})}}},E={style:{display:"flex"}},L=u("h1",null,"/request/info/collector/cache/url/field",-1),N={class:"card-header"},O=u("span",null,"/request/info/collector/report/url/field",-1);function z(e,t,o,r,l,c){const f=n("el-button"),m=n("el-tag"),_=n("el-autocomplete"),w=n("el-row"),g=n("JsonViewer"),y=n("el-tab-pane"),C=n("el-tabs"),x=n("el-card");return U(),F(q,null,[u("div",E,[L,a(f,{onClick:c.setOptions,type:"primary",style:{margin:"20px"}},{default:s(()=>[d("\u67E5\u8BE2")]),_:1},8,["onClick"])]),a(w,null,{default:s(()=>[a(m,null,{default:s(()=>[d("\u9700\u8981\u7EDF\u8BA1\u7684url")]),_:1}),a(_,{onClear:t[0]||(t[0]=i=>c.setBlur()),modelValue:l.url,"onUpdate:modelValue":t[1]||(t[1]=i=>l.url=i),"fetch-suggestions":c.querySearchUrls,clearable:"",placeholder:"url",onSelect:e.handleSelect,style:{width:"100%","margin-bottom":"18px"}},null,8,["modelValue","fetch-suggestions","onSelect"]),a(m,null,{default:s(()=>[d("\u9700\u8981\u7EDF\u8BA1\u7684\u5B57\u6BB5\u540D")]),_:1}),a(_,{onClear:t[2]||(t[2]=i=>c.setBlur()),modelValue:l.field,"onUpdate:modelValue":t[3]||(t[3]=i=>l.field=i),"fetch-suggestions":c.querySearchFields,clearable:"",placeholder:"field",onSelect:e.handleSelect,style:{width:"100%","margin-bottom":"18px"}},null,8,["modelValue","fetch-suggestions","onSelect"])]),_:1}),a(x,{class:"box-card"},{header:s(()=>[u("div",N,[O,a(f,{class:"button",text:""},{default:s(()=>[d("\u590D\u5236\u4E3Acurl\u547D\u4EE4")]),_:1})])]),default:s(()=>[a(C,{modelValue:e.activeName,"onUpdate:modelValue":t[4]||(t[4]=i=>e.activeName=i),class:"demo-tabs",onTabClick:e.handleClick},{default:s(()=>[a(y,{label:"\u8BF7\u6C42\u4F53",name:"first"},{default:s(()=>[a(g,{value:l.requestBody,copyable:"",boxed:"",sort:""},null,8,["value"])]),_:1}),a(y,{label:"\u54CD\u5E94\u7ED3\u679C",name:"second"},{default:s(()=>[a(g,{value:l.response,copyable:"",boxed:"",sort:""},null,8,["value"])]),_:1})]),_:1},8,["modelValue","onTabClick"])]),_:1}),u("div",{ref:"chart_wrap",class:"chart_wrap",style:S(l.myChartStyle)},null,4)],64)}const G=B(k,[["render",z]]);export{G as default};
