import{r as e,i as t}from"./index.39ac0d24.js";import{n as l,a,o as s,m as r,b as o,w as i,g as c,p as n,F as d,f as h}from"./vendor.8bd8fff2.js";var u=[],f=[];e.post({url:"/request/info/collector/cache/field/url",data:{}}).then((e=>{console.log(e),u=e.data.urls,f=e.data.fields})).catch((e=>{console.log(e),l({showClose:!0,message:"请求错误",type:"warning"})}));const p={name:"demo",computed:{},data:()=>({myChartStyle:{float:"left",width:"100%",height:"90%"},url:"",field:"",chart:null}),created(){},mounted(){this.initCharts()},watch:{category(e,t){console.log(1111,e,t),this.setOptions(e)}},methods:{setBlur(){document.activeElement.blur()},querySearchUrls(e,t){const l=e?u.filter(this.createFilter(e)):u;let a=[];for(let s=0;s<l.length;s++)a.push({value:l[s]});console.log(a),t(a)},querySearchFields(e,t){const l=e?f.filter(this.createFilter(e)):f;let a=[];for(let s=0;s<l.length;s++)a.push({value:l[s]});console.log(a),t(a)},createFilter:e=>t=>t.toUpperCase().match(e.toUpperCase()),initCharts(){this.chart=t(this.$refs.chart_wrap),window.addEventListener("resize",(()=>{this.chart.resize()}))},setOptions(){var t=[],a=[];e.post({url:"/request/info/collector/report/field/url",data:{url:this.url,field:this.field}}).then((e=>{console.log(e),t=e.data.labels,a=e.data.values,this.chart.setOption({title:{text:"字段:"+this.field+"在URL:"+this.url+"的值分布"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},color:["#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3","#ff0000","#00ff00","#0000ff"],grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:t},series:[{name:val,type:"bar",data:a}]})})).catch((e=>{console.log(e),l({showClose:!0,message:"请求错误",type:"warning"})}))}}},g=h("查询");p.render=function(e,t,l,h,u,f){const p=a("el-autocomplete"),m=a("el-button"),y=a("el-row");return s(),r(d,null,[o(y,null,{default:i((()=>[o(p,{onClear:t[0]||(t[0]=e=>f.setBlur()),modelValue:u.url,"onUpdate:modelValue":t[1]||(t[1]=e=>u.url=e),"fetch-suggestions":f.querySearchUrls,clearable:"",placeholder:"url",onSelect:e.handleSelect,style:{width:"45%"}},null,8,["modelValue","fetch-suggestions","onSelect"]),o(p,{onClear:t[2]||(t[2]=e=>f.setBlur()),modelValue:u.field,"onUpdate:modelValue":t[3]||(t[3]=e=>u.field=e),"fetch-suggestions":f.querySearchFields,clearable:"",placeholder:"field",onSelect:e.handleSelect,style:{width:"45%"}},null,8,["modelValue","fetch-suggestions","onSelect"]),o(m,{type:"primary",onClick:t[4]||(t[4]=e=>f.setOptions())},{default:i((()=>[g])),_:1})])),_:1}),c("div",{ref:"chart_wrap",class:"chart_wrap",style:n(u.myChartStyle)},null,4)],64)};export{p as default};
