import{P}from"./PostItem.64ecd744.js";import{J as U}from"./JsonResult.ae2296f4.js";import{r as k,i as E}from"./index.0ef1d26a.js";import{_ as J}from"./_plugin-vue_export-helper.cdc0426e.js";import{E as x,r as F,a as c,c as C,b as r,d as s,w as n,F as w,f as R,g as V,h as L,n as z,o as p,e as u,p as O,i as T}from"./index.617ff052.js";var f=[];k.post({url:"/request/info/collector/cache/field/field",data:{}}).then(e=>{console.log(e),e.data.urls,f=e.data.fields}).catch(e=>{console.log(e),x({showClose:!0,message:"\u8BF7\u6C42\u9519\u8BEF",type:"warning"})});const A={name:"demo",components:{PostItem:P,JsonResult:U},setup(){const e=F(""),t=F(null);return{url:e,result:t}},computed:{},data(){return{myChartStyle:{float:"left",width:"100%",height:"90%"},field:"",value:"",targetFieldName:"",chart:null,params:[],requestBody:{},response:{}}},created(){},mounted(){this.initCharts()},watch:{},methods:{removeParam(e){this.params.splice(e,1)},addParam(){this.params.push({key:"",value:""})},setBlur(){document.activeElement.blur()},querySearchFields(e,t){const i=e?f.filter(this.createFilter(e)):f;let o=[];for(let a=0;a<i.length;a++)o.push({value:i[a]});console.log(o),t(o)},createFilter(e){return t=>t.value.toUpperCase().match(e.toUpperCase())},initCharts(){this.chart=E(this.$refs.chart_wrap),window.addEventListener("resize",()=>{this.chart.resize()})},setOptions(e){var t=[],i=[];const o=[],a=[];console.log(this),this.params.forEach(l=>{o.push(l.key),a.push(l.value)}),this.requestBody={fieldNames:o,fieldValues:a,targetField:this.targetFieldName},console.log(o),console.log(a),k.post({url:"/request/info/collector/report/field/field",data:{fieldNames:o,fieldValues:a,targetField:this.targetFieldName}}).then(l=>{console.log(l),this.response=l,t=l.data.labels,i=l.data.values,this.chart.setOption({title:{text:"\u5B57\u6BB5:"+this.targetFieldName+"\u503C\u5206\u5E03"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},color:["#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3","#ff0000","#00ff00","#0000ff"],grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:t},series:[{name:e,type:"bar",data:i}]})}).catch(l=>{console.log(l),x({showClose:!0,message:"\u8BF7\u6C42\u9519\u8BEF",type:"warning"})})}}},_=e=>(O("data-v-71e30db4"),e=e(),T(),e),G={class:"post"},M={style:{display:"flex"}},j=_(()=>r("h1",null,"/request/info/collector/cache/field/field",-1)),D={class:"post-main"},H={class:"main-head"},K=_(()=>r("div",null,"\u5B57\u6BB5\u540D",-1)),Q=_(()=>r("div",null,"\u5B57\u6BB5\u503C",-1)),W={class:"main-content"},X={class:"card-header"},Y=_(()=>r("span",null,"/request/info/collector/report/url/field",-1));function Z(e,t,i,o,a,l){const h=c("el-button"),v=c("el-tag"),N=c("el-autocomplete"),S=c("PostItem"),q=c("JsonResult"),g=c("JsonViewer"),y=c("el-tab-pane"),B=c("el-tabs"),I=c("el-card");return p(),C(w,null,[r("div",G,[r("div",M,[j,s(h,{onClick:l.setOptions,type:"primary",style:{margin:"20px"}},{default:n(()=>[u("\u67E5\u8BE2")]),_:1},8,["onClick"])]),s(v,null,{default:n(()=>[u("\u9700\u8981\u7EDF\u8BA1\u7684\u5B57\u6BB5\u540D")]),_:1}),s(N,{onClear:t[0]||(t[0]=d=>l.setBlur()),modelValue:a.targetFieldName,"onUpdate:modelValue":t[1]||(t[1]=d=>a.targetFieldName=d),"fetch-suggestions":l.querySearchFields,clearable:"",placeholder:"targetFieldName",onSelect:e.handleSelect,style:{width:"100%","margin-bottom":"20px"}},null,8,["modelValue","fetch-suggestions","onSelect"]),s(v,null,{default:n(()=>[u("\u7EDF\u8BA1\u6839\u636E\u7684\u5B57\u6BB5\uFF08\u4E00\u4E2A\u6216\u591A\u4E2A\uFF09")]),_:1}),r("div",D,[r("div",H,[K,Q,s(h,{onClick:l.addParam,type:"primary"},{default:n(()=>[u("\u6DFB\u52A0")]),_:1},8,["onClick"])]),r("div",W,[(p(!0),C(w,null,R(a.params,(d,b)=>(p(),V(S,{onRemoveItem:m=>l.removeParam(b),name:d.key,"onUpdate:name":m=>d.key=m,value:d.value,"onUpdate:value":m=>d.value=m,key:b},null,8,["onRemoveItem","name","onUpdate:name","value","onUpdate:value"]))),128))])]),o.result?(p(),V(q,{key:0,result:o.result},null,8,["result"])):L("",!0)]),s(I,{class:"box-card"},{header:n(()=>[r("div",X,[Y,s(h,{class:"button",text:""},{default:n(()=>[u("\u590D\u5236\u4E3Acurl\u547D\u4EE4")]),_:1})])]),default:n(()=>[s(B,{modelValue:e.activeName,"onUpdate:modelValue":t[2]||(t[2]=d=>e.activeName=d),class:"demo-tabs",onTabClick:e.handleClick},{default:n(()=>[s(y,{label:"\u8BF7\u6C42\u4F53",name:"first"},{default:n(()=>[s(g,{value:a.requestBody,copyable:"",boxed:"",sort:""},null,8,["value"])]),_:1}),s(y,{label:"\u54CD\u5E94\u7ED3\u679C",name:"second"},{default:n(()=>[s(g,{value:a.response,copyable:"",boxed:"",sort:""},null,8,["value"])]),_:1})]),_:1},8,["modelValue","onTabClick"])]),_:1}),r("div",{ref:"chart_wrap",class:"chart_wrap",style:z(a.myChartStyle)},null,4)],64)}const se=J(A,[["render",Z],["__scopeId","data-v-71e30db4"]]);export{se as default};
